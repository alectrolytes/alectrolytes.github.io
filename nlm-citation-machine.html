---
layout: default
title: NLM Citation Machine
---

<!-- background tint-->
<div style="height:100%; width:100%; background: rgba(255,255,255,.8)"></div>

<!-- awesome zoom box navbar! -->
<nav class="navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar">
      <div id="projects-btn" class="box">
        Projects
        <span class="top"></span>
        <span class="right"></span>
        <span class="bottom"></span>
        <span class="left"></span>
        <a href="http://teamnex.us/#3" class="boxlink"></a>
      </div>
    </div>
  </div>
</nav>

<!-- citation form -->
<div style="height:60%; width:60%; background:rgba(0,0,0,0.9); position:fixed; top:50%; left:50%; transform: translate(-50%,-50%)">
  <div id="nlm-description" style="height:100%; width:40%; float:left; padding:1em">
    <h2 style="color:white; margin-left:auto; margin-right:auto">NLM Citation Machine</h1>
    <p style="color:white">NLM style citation machine for articles in <a href="http://www.ncbi.nlm.nih.gov/pubmed">PubMed</a> and books in <a href="https://books.google.com">Google Books</a>.</p>>
    <p style="color:white">Enter PubMedID or ISBN number in the search field</p>
    <p style="color:white">Useful references:</p>
    <ul>
      <li style="color:white">DiPiro: 0071800549</li>
      <li style="color:white">CHEST: 22315268</li>
      <li style="color:white">ACC/AHA Cholesterol: 24239923<li>
    </ul>
  </div>
  <form id="citation-form"style="height:100%; width:60%; float:right; text-align:center">
    <input type="text" id="query" style="position:relative; width:60%; top:15%; margin:auto" placeholder="Search here:"> <br>
    <input type="button" id="generate-btn" style="color:white; background-color:#00CC99; border:none; position:relative; top:25%; margin:auto" value="Generate!" onclick="generateCitation()"> <br>
    <textarea readonly id="citation" style="position:relative; height:40%; width:60%; top:35%; margin:auto; resize:none" rows="5"></textarea>
  </form>
</div>

<script>
function Get(yourUrl){
  var Httpreq = new XMLHttpRequest();
  Httpreq.open("GET",yourUrl,false);
  Httpreq.send(null);
  return Httpreq.responseText;
}

function generateCitation() {
  var search = document.getElementById('query').value;

  // determines if input is ISBN or PubMedID
  if (Number.isInteger(parseInt(search))) {
    var search_length = search.length;
    if (search_length === 10 || search_length === 13) {
      // parse JSON into js object
      var json_obj = JSON.parse(Get('https://www.googleapis.com/books/v1/volumes?q=isbn:' + search));
      // isolate nested book object
      var book = json_obj.items[0].volumeInfo;
      // arrange name
      var name = book.authors[0];
      var name_array = name.split(" ");
      var name_nlm = name_array[name_array.length - 1] + ' ' + name_array[0].charAt(0);
      // generate NLM book citation
      var citation = name_nlm + ' et al. ' +  book.title + '. ' + book.publisher + '; ' + book.publishedDate + '. ' + book.pageCount + ' p.';
    } else {
      // parse JSON into js object
      var json_obj = JSON.parse(Get('http://eutils.ncbi.nlm.nih.gov/entrez/eutils/esummary.fcgi?db=pubmed&retmode=json&rettype=abstract&id=' + search));
      // isolate nested article object
      var article = json_obj.result[search];
      // generate NLM article citation depending if volume and issue are variables
      if (article.volume === '') {
        var citation = article.authors[0].name + ' et al. ' + article.title + ' ' + article.source + '. ' + article.pubdate;
      } else {
        var citation = article.authors[0].name + ' et al. ' + article.title + ' ' + article.source + '. ' + article.pubdate + ';' + article.volume + '(' + article.issue + ')';
      }
    }
  }

  // print citation
  // console.log(citation);
  document.getElementById('citation').value = citation;
}
</script>
